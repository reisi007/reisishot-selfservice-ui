<div class="text-center p-6">
  <form [formGroup]="reviewData" class="space-y-0">
    <h1>Review erstellen oder bearbeiten</h1>
    <app-rating
      (newValue)="setValue($event)"
      [editable]="true"
      [max]="100"
      [min]="0"
      [style]="'4x'"
      [value]="reviewData.get('rating')?.value"
    ></app-rating>
    <div>
      <input [ngClass]="{'loaded': rawData !== null}" class="w-full md:w-1/3" formControlName="name"
             placeholder="Name" type="text"/>
    </div>
    <div>
      <input
        [attr.disabled]="emailDisabled"
        [ngClass]="{'loaded': rawData !== null}"
        class="w-full md:w-1/3"
        formControlName="email"
        placeholder="E-Mail"
        type="email"
      />
    </div>
    <p class="mx-auto w-full md:w-1/3 py-2">
      Verwende **2 Sterne** um Wörter <b>fett</b> zu schreiben<br/>
      Unter dem jeweiligen Textfeld siehst du eine Vorschau
    </p>
    <div>
      <p class="mx-auto w-full md:w-1/3 py-1 whitespace-pre-line">
        Was hast du besonders gut gefunden?<br/>
        Was möchtest du, dass ich verbessere?<br/>
      </p>
      <textarea
        [ngClass]="{'loaded': rawData !== null}"
        class="w-full md:w-1/3 block mx-auto"
        formControlName="review_private"
        placeholder="Feedback, das nicht veröffentlicht wird"
        rows="10"
      ></textarea>
      <div [innerHTML]="reviewData.get('review_private')?.value |markdown"></div>
      <p class="mx-auto w-full md:w-1/3 py-1 whitespace-pre-line">
        Wie bist du auf mich aufmerksam geworden?<br/>
        Wie war die Planung des Shootings?<br/>
        Wie hast du dich während des Shootings gefühlt?<br/>
        Wie hast du dich nach dem Shooting gefühlt?<br/>
        Wie gefallen dir die Bilder?<br/>

        Und was dir sonst noch alles einfällt
      </p>
      <textarea
        [ngClass]="{'loaded': rawData !== null}"
        [pattern]="minWordRegexp"
        class="w-full md:w-1/3 block mx-auto"
        formControlName="review_public"
        placeholder="Öffentliche Bewertung"
        rows="10"
      ></textarea>
      <div [innerHTML]="reviewData.get('review_public')?.value |markdown"></div>
    </div>

    <div>
      <button
        (click)="saveReview()"
        [attr.disabled]="reviewData.valid &&!showSaved?null:''"
        class="w-full md:w-1/3 bg-reisishot text-white"
      >
        Speichern
      </button>
    </div>
    <div>
      <p *ngIf="showSaved" @triggerSaved
         class="p-5 rounded-lg mx-auto block w-full md:w-1/3 bg-reisishot text-white font-light text-3xl">
        Deine Bewertung wurde gespeichert.
      </p>
    </div>
  </form>
</div>
